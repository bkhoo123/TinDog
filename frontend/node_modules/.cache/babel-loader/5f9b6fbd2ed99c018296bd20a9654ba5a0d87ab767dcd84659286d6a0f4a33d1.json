{"ast":null,"code":"import { csrfFetch } from './csrf';\nconst SET_USER = 'session/setUser';\nconst REMOVE_USER = 'session/removeUser';\nconst actionSetUser = user => {\n  return {\n    type: SET_USER,\n    payload: user\n  };\n};\nconst removeUser = () => {\n  return {\n    type: REMOVE_USER\n  };\n};\nexport const thunkLogin = user => async dispatch => {\n  const {\n    credential,\n    password\n  } = user;\n  const res = await csrfFetch('/api/session', {\n    method: 'POST',\n    body: JSON.stringify({\n      credential,\n      password\n    })\n  });\n  const data = await res.json();\n  dispatch(setUser(data.user));\n  return res;\n};\nexport const restoreUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session');\n  const data = await response.json();\n  dispatch(setUser(data.user));\n  return response;\n};\nexport const signupUser = user => async dispatch => {\n  const {\n    email,\n    username,\n    firstName,\n    lastName,\n    password\n  } = user;\n  const response = await csrfFetch('/api/users', {\n    method: 'POST',\n    body: JSON.stringify({\n      username,\n      firstName,\n      lastName,\n      email,\n      password\n    })\n  });\n  const newUser = await response.json();\n  dispatch(setUser(newUser.user));\n  return response;\n};\nexport const logoutUser = () => async dispatch => {\n  const response = await csrfFetch('/api/session', {\n    method: 'DELETE'\n  });\n  dispatch(removeUser());\n  return response;\n};\nconst initialState = {\n  user: null\n};\nconst sessionReducer = function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  let newState;\n  switch (action.type) {\n    case SET_USER:\n      newState = Object.assign({}, state);\n      newState.user = action.payload;\n      return newState;\n    case REMOVE_USER:\n      newState = Object.assign({}, state);\n      newState.user = null;\n      return newState;\n    default:\n      return state;\n  }\n};\nexport default sessionReducer;","map":{"version":3,"names":["csrfFetch","SET_USER","REMOVE_USER","actionSetUser","user","type","payload","removeUser","thunkLogin","dispatch","credential","password","res","method","body","JSON","stringify","data","json","setUser","restoreUser","response","signupUser","email","username","firstName","lastName","newUser","logoutUser","initialState","sessionReducer","state","action","newState","Object","assign"],"sources":["/workspaces/TinDog/frontend/src/store/session.js"],"sourcesContent":["import {csrfFetch} from './csrf'\n\nconst SET_USER = 'session/setUser'\nconst REMOVE_USER = 'session/removeUser'\n\nconst actionSetUser = (user) => {\n    return {\n        type: SET_USER,\n        payload: user,\n    }\n}\n\nconst removeUser = () => {\n    return {\n        type: REMOVE_USER,\n    }\n}\n\nexport const thunkLogin = (user) => async dispatch => {\n    const {credential, password} = user\n    const res = await csrfFetch('/api/session', {\n        method: 'POST',\n        body: JSON.stringify({\n            credential,\n            password,\n        }),\n    })\n    const data = await res.json()\n    dispatch(setUser(data.user))\n    return res\n}\n\nexport const restoreUser = () => async dispatch => {\n    const response = await csrfFetch('/api/session')\n    const data = await response.json()\n    dispatch(setUser(data.user))\n    return response\n}\n\nexport const signupUser = (user) => async dispatch => {\n    const {email, username, firstName, lastName, password} = user\n    const response = await csrfFetch('/api/users', {\n        method: 'POST',\n        body: JSON.stringify({\n            username,\n            firstName,\n            lastName,\n            email,\n            password,\n        }),\n    })\n    const newUser = await response.json()\n    dispatch(setUser(newUser.user))\n    return response\n}\n\nexport const logoutUser = () => async dispatch => {\n    const response = await csrfFetch('/api/session' , {\n        method: 'DELETE',\n    })\n    dispatch(removeUser())\n    return response\n}\n\nconst initialState = {user: null}\n\nconst sessionReducer = (state = initialState, action) => {\n    let newState\n    switch (action.type) {\n        case SET_USER:\n            newState = Object.assign({}, state)\n            newState.user = action.payload\n            return newState\n        case REMOVE_USER:\n            newState = Object.assign({}, state)\n            newState.user = null\n            return newState\n        default: \n            return state;\n    }\n}\n\nexport default sessionReducer"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}